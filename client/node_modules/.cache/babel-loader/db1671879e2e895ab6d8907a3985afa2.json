{"ast":null,"code":"var _jsxFileName = \"/Users/danial_asraf/Desktop/covidid/client/src/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Routes from \"./Routes\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport AuthApi from \"./utils/createContext\";\nimport { hasSignned, signin } from \"./api/auth-api\"; //custom localstorage hooks\n\nconst useStateWithLocalStorage = localStorageKey => {\n  const [value, setValue] = React.useState(localStorage.getItem(localStorageKey) || \"\");\n  React.useEffect(() => {\n    localStorage.setItem(localStorageKey, value);\n  }, [value]);\n  return [value, setValue];\n};\n\nfunction App() {\n  const [auth, setAuth] = useState(false);\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [value, setValue] = useStateWithLocalStorage(\"myValueInLocalStorage\");\n\n  const handleOnChange = e => {\n    if (e.target.name === \"email\") {\n      setEmail(e.target.value); //local storage\n\n      localStorage.setItem(\"myValueInLocalStorage\", e.target.value);\n      setValue(e.target.value);\n    } else {\n      setPassword(e.target.value);\n    }\n  };\n\n  const handleSignIn = async e => {\n    e.preventDefault();\n    const res = await signin({\n      email,\n      password\n    });\n\n    if (res.data.auth) {\n      setAuth(true);\n    } //console.log(res);\n\n  };\n\n  const readSession = async () => {\n    const result = await hasSignned(); //result.data.auth\n\n    const {\n      data\n    } = result;\n    const {\n      auth\n    } = data;\n\n    if (auth) {\n      setAuth(true);\n    }\n\n    console.log(result);\n  };\n\n  useEffect(() => {\n    readSession(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/React.createElement(AuthApi.Provider, {\n    value: {\n      auth,\n      setAuth,\n      handleOnChange,\n      handleSignIn,\n      email,\n      password,\n      value\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Routes, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/danial_asraf/Desktop/covidid/client/src/App.js"],"names":["React","useState","useEffect","Routes","BrowserRouter","Router","AuthApi","hasSignned","signin","useStateWithLocalStorage","localStorageKey","value","setValue","localStorage","getItem","setItem","App","auth","setAuth","email","setEmail","password","setPassword","handleOnChange","e","target","name","handleSignIn","preventDefault","res","data","readSession","result","console","log"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Routes from \"./Routes\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport AuthApi from \"./utils/createContext\";\nimport { hasSignned, signin } from \"./api/auth-api\";\n\n//custom localstorage hooks\nconst useStateWithLocalStorage = (localStorageKey) => {\n  const [value, setValue] = React.useState(\n    localStorage.getItem(localStorageKey) || \"\"\n  );\n\n  React.useEffect(() => {\n    localStorage.setItem(localStorageKey, value);\n  }, [value]);\n\n  return [value, setValue];\n};\n\nfunction App() {\n  const [auth, setAuth] = useState(false);\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n\n  const [value, setValue] = useStateWithLocalStorage(\"myValueInLocalStorage\");\n\n  const handleOnChange = (e) => {\n    if (e.target.name === \"email\") {\n      setEmail(e.target.value);\n      //local storage\n      localStorage.setItem(\"myValueInLocalStorage\", e.target.value);\n      setValue(e.target.value);\n    } else {\n      setPassword(e.target.value);\n    }\n  };\n\n  const handleSignIn = async (e) => {\n    e.preventDefault();\n    const res = await signin({ email, password });\n    if (res.data.auth) {\n      setAuth(true);\n    }\n    //console.log(res);\n  };\n\n  const readSession = async () => {\n    const result = await hasSignned();\n    //result.data.auth\n    const { data } = result;\n    const { auth } = data;\n    if (auth) {\n      setAuth(true);\n    }\n    console.log(result);\n  };\n\n  useEffect(() => {\n    readSession();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <AuthApi.Provider\n      value={{\n        auth,\n        setAuth,\n        handleOnChange,\n        handleSignIn,\n        email,\n        password,\n        value,\n      }}\n    >\n      <Router>\n        <Routes />\n      </Router>\n    </AuthApi.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}