{"ast":null,"code":"var _jsxFileName = \"/Users/danial_asraf/Desktop/covidid/client/src/components/ToggleMenu.jsx\";\nimport React, { useState, useRef, useEffect, useContext } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport Grow from \"@material-ui/core/Grow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Popper from \"@material-ui/core/Popper\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport MenuList from \"@material-ui/core/MenuList\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AuthApi from \"../utils/createContext\";\nimport { signout } from \"../api/auth-api\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport FormDialog from \"./FormDialog\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\"\n  },\n  paper: {\n    marginRight: theme.spacing(2)\n  }\n}));\nexport default function MenuListComposition() {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [showQR, setShowQR] = useState(false);\n  const anchorRef = useRef(null); //handle logout\n\n  const {\n    setAuth\n  } = useContext(AuthApi);\n\n  const handleLogout = async () => {\n    const res = await signout();\n    setAuth(res.data.auth);\n  };\n\n  const handleQRFormDialog = () => {\n    setShowQR(true);\n  };\n\n  const handleToggle = () => {\n    setOpen(prevOpen => !prevOpen);\n  };\n\n  const handleClose = event => {\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\n      return;\n    }\n\n    setOpen(false);\n  };\n\n  function handleListKeyDown(event) {\n    if (event.key === \"Tab\") {\n      event.preventDefault();\n      setOpen(false);\n    }\n  } // return focus to the button when we transitioned from !open -> open\n\n\n  const prevOpen = useRef(open);\n  useEffect(() => {\n    if (prevOpen.current === true && open === false) {\n      anchorRef.current.focus();\n    }\n\n    prevOpen.current = open;\n  }, [open]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    ref: anchorRef,\n    \"aria-controls\": open ? \"menu-list-grow\" : undefined,\n    \"aria-haspopup\": \"true\",\n    onClick: handleToggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MenuIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Popper, {\n    open: open,\n    anchorEl: anchorRef.current,\n    role: undefined,\n    transition: true,\n    disablePortal: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, ({\n    TransitionProps,\n    placement\n  }) => /*#__PURE__*/React.createElement(Grow, Object.assign({}, TransitionProps, {\n    style: {\n      transformOrigin: placement === \"bottom\" ? \"center top\" : \"center bottom\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Paper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ClickAwayListener, {\n    onClickAway: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(MenuList, {\n    autoFocusItem: open,\n    id: \"menu-list-grow\",\n    onKeyDown: handleListKeyDown,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: handleQRFormDialog,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 21\n    }\n  }, \"QR Code\"), /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: handleLogout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 21\n    }\n  }, \"Logout\")))))), showQR ? /*#__PURE__*/React.createElement(FormDialog, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 19\n    }\n  }) : null));\n}","map":{"version":3,"sources":["/Users/danial_asraf/Desktop/covidid/client/src/components/ToggleMenu.jsx"],"names":["React","useState","useRef","useEffect","useContext","Button","ClickAwayListener","Grow","Paper","Popper","MenuItem","MenuList","makeStyles","AuthApi","signout","MenuIcon","FormDialog","useStyles","theme","root","display","paper","marginRight","spacing","MenuListComposition","classes","open","setOpen","showQR","setShowQR","anchorRef","setAuth","handleLogout","res","data","auth","handleQRFormDialog","handleToggle","prevOpen","handleClose","event","current","contains","target","handleListKeyDown","key","preventDefault","focus","undefined","TransitionProps","placement","transformOrigin"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect, useContext } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport Grow from \"@material-ui/core/Grow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Popper from \"@material-ui/core/Popper\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport MenuList from \"@material-ui/core/MenuList\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AuthApi from \"../utils/createContext\";\nimport { signout } from \"../api/auth-api\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport FormDialog from \"./FormDialog\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\",\n  },\n  paper: {\n    marginRight: theme.spacing(2),\n  },\n}));\n\nexport default function MenuListComposition() {\n  const classes = useStyles();\n  const [open, setOpen] = useState(false);\n  const [showQR, setShowQR] = useState(false);\n  const anchorRef = useRef(null);\n\n  //handle logout\n  const { setAuth } = useContext(AuthApi);\n  const handleLogout = async () => {\n    const res = await signout();\n    setAuth(res.data.auth);\n  };\n\n  const handleQRFormDialog = () => {\n    setShowQR(true);\n  };\n\n  const handleToggle = () => {\n    setOpen((prevOpen) => !prevOpen);\n  };\n\n  const handleClose = (event) => {\n    if (anchorRef.current && anchorRef.current.contains(event.target)) {\n      return;\n    }\n\n    setOpen(false);\n  };\n\n  function handleListKeyDown(event) {\n    if (event.key === \"Tab\") {\n      event.preventDefault();\n      setOpen(false);\n    }\n  }\n\n  // return focus to the button when we transitioned from !open -> open\n  const prevOpen = useRef(open);\n  useEffect(() => {\n    if (prevOpen.current === true && open === false) {\n      anchorRef.current.focus();\n    }\n\n    prevOpen.current = open;\n  }, [open]);\n\n  return (\n    <div className={classes.root}>\n      <div>\n        <Button\n          ref={anchorRef}\n          aria-controls={open ? \"menu-list-grow\" : undefined}\n          aria-haspopup=\"true\"\n          onClick={handleToggle}\n        >\n          <MenuIcon />\n        </Button>\n        <Popper\n          open={open}\n          anchorEl={anchorRef.current}\n          role={undefined}\n          transition\n          disablePortal\n        >\n          {({ TransitionProps, placement }) => (\n            <Grow\n              {...TransitionProps}\n              style={{\n                transformOrigin:\n                  placement === \"bottom\" ? \"center top\" : \"center bottom\",\n              }}\n            >\n              <Paper>\n                <ClickAwayListener onClickAway={handleClose}>\n                  <MenuList\n                    autoFocusItem={open}\n                    id=\"menu-list-grow\"\n                    onKeyDown={handleListKeyDown}\n                  >\n                    <MenuItem onClick={handleQRFormDialog}>QR Code</MenuItem>\n                    <MenuItem onClick={handleLogout}>Logout</MenuItem>\n                  </MenuList>\n                </ClickAwayListener>\n              </Paper>\n            </Grow>\n          )}\n        </Popper>\n        {showQR ? <FormDialog /> : null}\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}